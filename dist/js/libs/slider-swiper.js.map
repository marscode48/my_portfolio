{"version":3,"names":[],"mappings":"","sources":["libs/slider-swiper.js"],"sourcesContent":["export class HeroSlider {\n  constructor(el, delay) {\n    this.el = el;\n    this.delay = delay;\n    this.timer = null;\n    this.swiper = this._initSwiper();\n  }\n\n  _initSwiper() {\n    // スライド要素取得\n    const slideLength = document.querySelectorAll('.js-works-hero .swiper-slide').length;\n    const total = (`00${slideLength}`).slice(-2);\n    const fractionNum = document.querySelector('.js-works-hero .fraction__num');\n    const fractionTotal = document.querySelector('.js-works-hero .fraction__total');\n    fractionTotal.textContent = total;\n\n    // スライド番号の切り替え\n    const updateFraction = (index) => {\n      const current = (`00${index + 1}`).slice(-2);\n      fractionNum.classList.add('anm-started');\n      setTimeout(() => {\n        fractionNum.textContent = current;\n      }, 400);\n    };\n\n    // スライド番号の削除\n    const finishFraction = () => {\n      fractionNum.classList.remove('anm-started');\n    };\n\n\n    // アニメーション切り替え\n    const switchAnimation = () => {\n      clearTimeout(this.timer);\n      const activeSlide = document.querySelectorAll('.js-works-hero .swiper-slide[class*=-active]');\n      for (let i = 0; i < activeSlide.length; i += 1) {\n        activeSlide[i].classList.remove('anm-finished');\n        activeSlide[i].classList.add('anm-started');\n      }\n\n      this.timer = setTimeout(() => {\n        for (let i = 0; i < activeSlide.length; i += 1) {\n          activeSlide[i].classList.remove('anm-started');\n          activeSlide[i].classList.add('anm-finished');\n        }\n      }, this.delay - 1000);\n    };\n\n    // アニメーション終了（手動でスライド切替された時）\n    const finishAnimation = () => {\n      const activeSlide = document.querySelectorAll('.js-works-hero .swiper-slide.anm-started');\n      for (let i = 0; i < activeSlide.length; i += 1) {\n        activeSlide[i].classList.remove('anm-started');\n        activeSlide[i].classList.add('anm-finished');\n      }\n    };\n\n    return new Swiper(this.el, {\n      effect: 'fade',\n      fadeEffect: {\n        crossFade: true,\n      },\n      loop: true,\n      loopAdditionalSlides: 1,\n      speed: 2000,\n      followFinger: false,\n      grabCursor: true,\n      pagination: {\n        el: '.js-works-hero .swiper-pagination',\n        clickable: true,\n      },\n      on: {\n        slideChange(swiper) {\n          updateFraction(swiper.realIndex);\n          finishAnimation();\n        },\n        slideChangeTransitionStart() {\n          switchAnimation();\n        },\n        slideChangeTransitionEnd() {\n          finishFraction();\n        },\n      },\n    });\n  }\n\n  start(customOptions = {\n    delay: this.delay,\n    disableOnInteraction: false,\n    waitForTransition: false,\n  }) {\n    const options = {\n      delay: 4000,\n      disableOnInteraction: false,\n      ...customOptions,\n    };\n\n    this.swiper.params.autoplay = options;\n    this.swiper.autoplay.start();\n  }\n\n  stop() {\n    this.swiper.autoplay.stop();\n  }\n}\n"],"file":"slider-swiper.js"}